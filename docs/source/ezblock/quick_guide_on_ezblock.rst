EzBlockクイック・ガイド
===========================

以下の２つのパートに分かれています：

* :ref:`ezb_servo_adjust` は全てのサーボを０度に保持して安全に組み立てること。（間違えてサーボを壊さないように）
* :ref:`install_ezblock` はアプリのダウンロードとロボットの動かし方。 

.. _ezb_servo_adjust:

サーボの調整
--------------------------------

サーボは-90°～+90°まで動きますが、工場出荷時の状態はまちまちになっています。
適当な角度になったまま組み上げてしまうとロボットを動かした時にどんな状態になるかわかりません。最悪サーボの動きが制限されてモーターが焼き切れる可能性もあります。

そこですべてのサーボを中立状態（０°）に設定して組み上げ、どちらに動かしても問題が無いようにします。

組み立て後にはPiCar-Xのアプリケーションに従ってキャリブレーションを行うことを推奨します。
サーボの角度は組み立てやサーボ自体の誤差でずれることがあります。そこでキャリブレーションによって完全に調整します。通常であればずれは±5°に収まります。

もし誤差が大きい場合はもう一度このセクションに戻ってサーボの角度を調整し直してください。そして再度説明書に従って組み立て直してください。


#. 最初に :ref:`ezblock:install_ezblock_os_latest` をマイクロSDにインストールします。インストールが終わったらRaspberry piにSDカードをセットします。

#. サーボを確実に0°に設定するために、サーボのギヤにサーボのアームをセットしてからアームをゆっくり左右どちらかに動かしてやります。

    .. image:: img/servo_arm.png

#. 組み立て図に従ってバッテリーをバッテリーケースにセットしてから、ケースからの配線をロボット・ハットの該当コネクタに接続し、電源スイッチをオンにします。１～２分待つと音が鳴ってRspberry piの起動が終わったことが確認できます。

    .. image:: img/slide_to_power.png

#. 調整するサーボのケーブルを図に従ってP11（サーボモーター１１番）のピンに差し込みます。

    .. image:: img/pin11_connect.png

#. この時にサーボのアームが動いて0°に戻ります。もし0°にならない場合はリセットボタン（RSTボタン）を押してロボット・ハットをリセットしてください。
なお、出荷時のギアの位置が0度からずれていた場合はアームの位置はずれた状態でセットされているので、サーボの配線を抜いてからアームを付け直し、もう一度左右にずらしてから同じように調整してみてください。
それで正常に0°になるのであればそれできちんとキャリブレーションされています。

#. これで組み立て作業を続行できます。

.. note::

    * サーボに該当のアームを取り付けてねじで締めるまでサーボのケーブルは抜かないでください。（組立図面の１８，１９，２２を参照）　各図のサーボ1つずつ順番にこの作業を行います。
    * サーボの電源が入っているとき（ケーブルがピンに繋がっているとき）はサーボのアームを動かさないようにしてください。壊れる可能性があります。サーボのギアの歯とアームの歯の位置によっては少し曲がって付く事がありますが±５°以内であれば後ほど調整可能です。
    * 各サーボの組み立て前にサーボの配線をP11のピンに接続してサーボの角度を0°に設定する必要があります。
    * もしEzBlock OSをインストールせずにこの作業を行っても調整作業は無駄になります。


.. _install_ezblock:

EzBlock Studioのインストールと設定
----------------------------------------

ロボットの組み立てが終わると最初にいくつかの作業が必要になります。

* :ref:`ezblock:install_ezblock_app_latest`:タブレットやスマートフォンを使う場合はEzBlock Studioのダウンロードとインストールが必要になります。PCの場合ではウェブベースで作業可能です。
* :ref:`ezblock:connect_product_ezblock_latest`:利用前のWi-FiまたはBluetoothの設定とキャリブレーション。
* :ref:`ezblock:open_run_latest`:プログラムの例の表示と実行。

.. note::

    PiCar-Xに接続後にはキャリブレーションが必要です。
    前に述べた様にわずかなずれ（誤差）が残っているためです。
    なお通常キャリブレーションは毎回行う必要はなく初めて接続した時だけ行えば十分です。
    ただ何らかの原因でずれが生じた際はもう一度行うことが可能です。

    またもし組み立て時点で完璧に組めたという自信があるのであればこの作業を飛ばしても構いません。